 Music Library API

Это REST API для управления музыкальной библиотекой. Он позволяет добавлять, просматривать, обновлять и удалять информацию о песнях.

## Описание

API предоставляет следующие возможности:

-   Добавление новой песни
-   Просмотр списка всех песен
-   Получение текста песни по ID
-   Обновление информации о песне по ID
-   Удаление песни по ID
-   Получение информации о песне по имени группы и названию песни.

## Технологии

В проекте используются следующие технологии:

-   **Go**: Основной язык программирования.
-   **Gin**: Web-фреймворк для создания API.
-   **Docker**: postgres база данных для хранения информации о песнях.
-   **Goose**: Инструмент для управления миграциями базы данных.
-   **Swaggo**: Инструмент для генерации документации Swagger.
-   **Godotenv**: Инструмент для работы с переменными окружения.
-   **Logrus**: Библиотека для логирования.

## Предварительные требования

Перед запуском приложения убедитесь, что у вас установлены:

-   **Go (версия 1.18 или выше)**
-   **Docker** (если вы планируете запускать PostgreSQL в контейнере)
-   **Swag CLI**: Для генерации документации Swagger
    ```bash
    go install github.com/swaggo/swag/cmd/swag@latest
    ```

## Настройка

1.  **Клонирование репозитория:**

    ```bash
    git clone https://github.com/Skorpsrgvch/MusicAPI.git
    cd MusicAPI
    ```

2.  **Создание `.env` файла:**

    Создайте файл `.env` в корне проекта и добавьте переменные окружения для подключения к базе данных:

    ```env
    DB_HOST=localhost
    DB_PORT=5432
    DB_USER=your_user
    DB_PASSWORD=your_password
    DB_NAME=music_db
    DB_SSLMODE=disable
    ```

    Замените `your_user`, `your_password` и `music_db` на ваши фактические данные.

3.  **Настройка PostgreSQL:**

    -   **Локально:** Убедитесь, что у вас установлен PostgreSQL и он запущен.
    -   **В Docker:** Вы можете использовать Docker для запуска PostgreSQL. Пример команды:
        ```bash
        docker run -d --name music_db -p 5432:5432 -e POSTGRES_USER=your_user -e POSTGRES_PASSWORD=your_password -e POSTGRES_DB=music_db postgres:latest
        ```

4.  **Установка зависимостей:**
    ```bash
    go mod tidy
    go mod vendor
    ```

## Запуск приложения

1.  **Генерация документации Swagger:**
    ```bash
    swag init
    ```
2.  **Запуск сервера:**
    ```bash
    go run ./cmd/main.go
    ```

    Сервер запустится по умолчанию на порту 8000.

## Использование API

Вы можете использовать Swagger UI для просмотра документации API и отправки запросов. Swagger UI доступен по адресу:

`http://localhost:8000/swagger/index.html`

### Примеры запросов

*   **Добавление песни:**
  
    **POST** `/songs/`
  
    ```json
     {
            "group_name": "Metallica",
            "song": "Master Of Puppets",
            "release_date": "2024-07-09T00:00:00Z",
            "lyrics": "Test lyrics",
            "link": "https://www.example.com"
        }
    ```
    *   **Получение текста песни:**
  
         **GET**  `/songs/{id}/text`  
        
         Параметры запроса:

        -   `id`: (int, required) ID песни
        -   `page`: (int, optional) Номер страницы для отображения.
        -   `limit`: (int, optional) Количество строк на странице.

*  **Получение информации о песне:**
  
       **GET** `/info?group={group_name}&song={song_name}`

## Миграции базы данных

Миграции базы данных находятся в папке `database/migration`.

Для запуска миграций используется `goose`. Миграции автоматически применяются при запуске сервера.

## Логирование

Логи приложения доступны в консоли.
